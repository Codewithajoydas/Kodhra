<div class="card" id="card-<%= e._id%>" ondblclick="window.open('/card/<%= e._id %>', '_blank')" data-id="<%= e._id %>"
    tabindex="0" data-menus="delete, edit, move, share" data-userId="<%= userId %>" data-contextMenu="true"
    data-cardName="<%= e.title %>" data-mtype="card" data-cardauthor="<%= e.author._id %>">
    <div class="header-info">
        <input type="checkbox" class="select-card" style="display: none" id="card_<%= e._id%>" />
        <label for="card_<%= e._id%>" style="display: flex; align-items: center; gap: 10px">
            <img src="<%= e.author.userImage %>" alt="" width="40" height="40" style="border-radius: 50%" onerror="this.src='https://static.vecteezy.com/system/resources/previews/013/360/247/non_2x/default-avatar-photo-icon-social-media-profile-sign-symbol-vector.jpg'" />
            <div class="title">
                <h3>
                    <%= e.title%>
                        <span style="font-size: 13px !important; display: block">
                            <%= e.description %>
                        </span>
                </h3>
                <div>
                    <span class="author"><strong>
                            <%= e.author.userName%>
                        </strong></span>,
                    <span class="lan">
                        <%= e.category%>
                    </span>,
                    <span class="time">
                        <%= new Date(e.metadata.createdAt).toLocaleString() %>
                    </span>
                </div>
            </div>
        </label>
        <div class="menu_top" data-menu-id="<%= e._id %>" data-id="<%= e._id %>" data-menus="delete, edit, move, share"
            onclick="openContextMenu(event)" data-userId="<%= userId %>" data-cardauthor="<%= e.author._id %>" data-cardName="<%= e.title %>"
            data-mtype="card" data-contextMenu='true' tabindex="0">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-ellipsis-vertical-icon lucide-ellipsis-vertical">
                <circle cx="12" cy="12" r="1" />
                <circle cx="12" cy="5" r="1" />
                <circle cx="12" cy="19" r="1" />
            </svg>
        </div>
    </div>

    <div class="code" title="<%= e.content%>">
        <code> <%= e.content %> </code>
    </div>

    <div class="tags">
        <% e.tags.forEach(tag=> { %>
            <a class="span" href="search?query=<%= tag %>">
                <%= tag %>
            </a>
            <% }) %>
    </div>

    <div class="options">
        <div class="open" tabindex="0">
            <a href="/card/<%= e.id%>" style="
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 10px;
          background: var(--accent);
        ">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-badge-info-icon lucide-badge-info">
                    <path
                        d="M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z" />
                    <line x1="12" x2="12" y1="16" y2="12" />
                    <line x1="12" x2="12.01" y1="8" y2="8" />
                </svg>
                View Details
            </a>
        </div>
        <div class="sub_menu">
            <div class="pin" onclick="pinIt(this,'<%= e._id %>')" data-id="<%= e._id%>" tabindex="0">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                    class="<%= e.isPinned ? 'active' : '' %>" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pin-icon lucide-pin">
                    <path d="M12 17v5" />
                    <path
                        d="M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z" />
                </svg>
            </div>

            <div class="fav" onclick="favIt(this, '<%= e._id %>')" data-id="<%= e._id%>" tabindex="0">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                    class="<%= e.isFavorite ? 'active' : '' %>" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star-icon lucide-star">
                    <path
                        d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z" />
                </svg>
            </div>
        </div>
    </div>
</div>