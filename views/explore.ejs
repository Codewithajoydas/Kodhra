<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Explore Public Snippets| Code Snippet Manager</title>
    <link rel="stylesheet" href="/style/css/partials/Header.css">
    <link rel="stylesheet" href="/style/css/ad_search.css">
    <link rel="stylesheet" href="/style/css/Notification.css">
    <link rel="stylesheet" href="/style/css/card.css">
    <link rel="stylesheet" href="/style/css/loader.css">
    <link rel="stylesheet" href="/style/css/index.css">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="/assets/logo.webp" type="image/png" />
    <script src="https://cdn.jsdelivr.net/npm/@codewithajoydas/toastmaster@3.0.0/dist/toaster.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@codewithajoydas/toastmaster@3.0.0/dist/toaster.min.css">
    <script src="/socket.io/socket.io.js"></script>

</head>

<body data-theme="light">
    <%- include("partials/loader.ejs") %>

        <div class="content">
            <%- include("partials/header.ejs")%>
                <div class="container">
                    <%- include("partials/sidebar.ejs", { navigation: 'explore' })%>
                        <main style="height: calc(100vh - 70px)">


                            <section style="display: flex; width: 100%; position: relative;">
                                <section style="flex: 1;">

                                    <div class="whatsnew" style="margin: 10px;">
                                        <div
                                            style="width: 100%;display: flex;justify-content: start;align-items: center;">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round"
                                                class="lucide lucide-package-plus-icon lucide-package-plus">
                                                <path d="M16 16h6" />
                                                <path d="M19 13v6" />
                                                <path
                                                    d="M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14" />
                                                <path d="m7.5 4.27 9 5.15" />
                                                <polyline points="3.29 7 12 12 20.71 7" />
                                                <line x1="12" x2="12" y1="22" y2="12" />
                                            </svg>
                                            <div style="line-height: 1.3rem;">
                                                <h3 style="margin: 0 10px;">What's New</h3>
                                                <span style="margin: 0 10px; font-size: x-small;">Discover the latest
                                                    updates, newly added features, and recent
                                                    improvementsâ€”all in one place.
                                                </span>
                                            </div>
                                        </div>
                                        <div class="video" style="margin-block: 5px;">
                                            <iframe style="width: 100%; border-radius: 10px; height: 400px;"
                                                src="https://www.youtube.com/embed/El6RBC27QS8?list=RDEl6RBC27QS8"
                                                title="Kar Agomon | Shankuraj Konwar | Pankaj Saikia | Rintu Saikia Shyamal Bhuyan (Official Video)"
                                                frameborder="0"
                                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                                referrerpolicy="strict-origin-when-cross-origin"
                                                allowfullscreen></iframe>
                                        </div>
                                    </div>

                                    <div class="page_title" onclick="collapse(this)">
                                        <span class="down"><svg xmlns="http://www.w3.org/2000/svg" width="20"
                                                height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                class="lucide lucide-chevron-down-icon lucide-chevron-down">
                                                <path d="m6 9 6 6 6-6" />
                                            </svg></span>
                                        Trending Snippets
                                    </div>
                                    <section>
                                        <div id="cards">
                                            <%- include("partials/cards") %>
                                        </div>
                                    </section>
                                </section>
                                <% if(users.length !==0){%>
                                    <section style="width: 350px; margin-left: 20px; position: sticky; top: 10px;"
                                        id="users">
                                        <ul class="users_list">
                                            <p
                                                style="display: flex; justify-content: start; align-items: center; gap: 10px; font-weight: bold;">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    class="lucide lucide-user-plus-icon lucide-user-plus">
                                                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
                                                    <circle cx="9" cy="7" r="4" />
                                                    <line x1="19" x2="19" y1="8" y2="14" />
                                                    <line x1="22" x2="16" y1="11" y2="11" />
                                                </svg> Follow Us
                                            </p>
                                            <hr style="margin-block:10px ;">
                                            <% users?.map((user)=> {%>
                                                <li
                                                    style="display: flex; justify-content: space-between;align-items: center;">
                                                    <a href="/profile/<%= user.userName%>">
                                                        <img src="<%= user.userImage%>" alt="<%= user.userName%>">
                                                        <span
                                                            style="display: flex;justify-content: start;flex-direction: column;">
                                                            <span>
                                                                <%= user.userName%>
                                                            </span>
                                                            <span style="font-size: x-small;">
                                                                Followers <%= user.followers?.length%> &bull; Following
                                                                    <%= user.following?.length%>
                                                            </span>
                                                        </span>
                                                    </a>
                                                    <button
                                                        onclick="follow('<%= user._id %>', event, this)">Follow</button>
                                                </li>
                                                <%}) %>
                                        </ul>
                                    </section>
                                    <%}%>
                            </section>
                        </main>


                        <%- include("partials/fab.ejs")%>

                            <div id="context_menu" style="
            position: absolute;
            top: 0;
            left: 0;
            display: none;
            z-index: 1000000;
            width: 200px;
          ">
                                <ul id="context_menu_list"></ul>
                            </div>
                            <div class="networkInfo" style="display: none">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" class="lucide lucide-info-icon lucide-info">
                                        <circle cx="12" cy="12" r="10" />
                                        <path d="M12 16v-4" />
                                        <path d="M12 8h.01" />
                                    </svg></span>

                                <span id="networkInfo"></span>
                            </div>
                </div>
        </div>

        <script>
            async function follow(id, e, el) {
                e.preventDefault();
                el.disabled = true;
                try {
                    const res = await fetch(`/profile/follow/${id}`, {
                        method: "post",
                        contentType: "application/json",
                        credentials: "include",
                    });
                    if (res.ok) {
                        el.disabled = false;
                        if (el.textContent === "Follow") {
                            el.textContent = "Unfollow";
                        } else {
                            el.textContent = "Follow";
                        }
                    } else {
                        const data = await res.json();
                        new Toastmaster({
                            title: "Error",
                            message: data.message,
                            type: "error",
                            delay: 5000,
                        }).showNotification();
                    }
                } catch (error) {
                    new Toastmaster({
                        title: "Error",
                        message: error.message,
                        type: "error",
                        delay: 5000,
                    })
                }
            }
        </script>

        <script src="/scripts/ad_search.js"></script>
        <script src="/scripts/Fab.js"></script>
        <script src="/scripts/Notification.js"></script>
        <script src="/scripts/searchFunction.js"></script>
        <script src="/scripts/context_menu.js"></script>
        <script src="\scripts\isonline.js"></script>
        <script src="/scripts/header.js"></script>
        <script src="/scripts/collapse.js"></script>


</body>

</html>